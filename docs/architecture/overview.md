# ì „ì²´ ì•„í‚¤í…ì²˜

Tiny Tree App Templateì˜ ì „ì²´ ì•„í‚¤í…ì²˜ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.

## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```text
tiny_tree-app_template/
â”œâ”€â”€ apps/                    # ìƒì„±ëœ ì•±ë“¤ (ë¯¸êµ¬í˜„)
â”‚   â””â”€â”€ [app_name]/
â”œâ”€â”€ packages/                # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ íŒ¨í‚¤ì§€
â”‚   â”œâ”€â”€ core/                # í•„ìˆ˜ ê¸°ë°˜ íŒ¨í‚¤ì§€
â”‚   â”‚   â””â”€â”€ storage/         âœ… êµ¬í˜„ ì™„ë£Œ
â”‚   â”œâ”€â”€ features/            # ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°ëŠ¥ íŒ¨í‚¤ì§€
â”‚   â”‚   â””â”€â”€ auth/            âœ… Domain/Data ì™„ë£Œ
â”‚   â””â”€â”€ integrations/        # ì„œë“œíŒŒí‹° ë˜í¼ (ë¯¸êµ¬í˜„)
â”‚       â”œâ”€â”€ firebase/
â”‚       â””â”€â”€ supabase/
â”œâ”€â”€ docs/                    # ë¬¸ì„œ
â””â”€â”€ melos.yaml               # Melos ì„¤ì •
```

## ğŸ“ ì„¤ê³„ ì›ì¹™

### 1. ê¸°ëŠ¥ë³„ ë¶„ë¦¬ (Feature-Based Architecture)

ë ˆì´ì–´ë³„(Presentation/Business/Data)ì´ ì•„ë‹Œ **ê¸°ëŠ¥ë³„**ë¡œ íŒ¨í‚¤ì§€ë¥¼ ë¶„ë¦¬í•©ë‹ˆë‹¤.

**ì¥ì **:

- ë…ë¦½ì ì¸ ê°œë°œ ë° ë°°í¬
- ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬
- ì¬ì‚¬ìš©ì„± ì¦ê°€

**ì˜ˆì‹œ**:

```text
packages/features/auth/     # ì¸ì¦ ê¸°ëŠ¥ ì „ì²´
packages/features/payment/  # ê²°ì œ ê¸°ëŠ¥ ì „ì²´
```

### 2. ì„ íƒì  ì˜ì¡´ì„± (Optional Dependencies)

ì•±ì—ì„œ í•„ìš”í•œ ê¸°ëŠ¥ë§Œ ì„ íƒí•˜ì—¬ ì‚¬ìš©í•©ë‹ˆë‹¤.

```yaml
# ì•±ì˜ pubspec.yaml
dependencies:
  auth:                      # ì¸ì¦ í•„ìš” ì‹œ
    path: ../../packages/features/auth
  payment:                   # ê²°ì œ í•„ìš” ì‹œ
    path: ../../packages/features/payment
```

### 3. ë…ë¦½ì  í™•ì¥ (Independent Evolution)

ê° íŒ¨í‚¤ì§€ëŠ” ë‚´ë¶€ë§Œ ìˆ˜ì •í•˜ì—¬ ê¸°ëŠ¥ì„ í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 4. ëª…í™•í•œ Public API

ë°°ëŸ´ íŒŒì¼(barrel file)ì„ í†µí•´ ëª…í™•í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

```dart
// packages/features/auth/lib/auth.dart
library;

export 'src/domain/entities/entities.dart';
export 'src/domain/usecases/usecases.dart';
// ...
```

## ğŸ¯ Clean Architecture

ê° feature íŒ¨í‚¤ì§€ëŠ” Clean Architectureë¥¼ ë”°ë¦…ë‹ˆë‹¤.

```text
packages/features/[feature]/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ [feature].dart       # Public API
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ domain/          # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (ìˆœìˆ˜ Dart)
â”‚       â”œâ”€â”€ data/            # ë°ì´í„° ì²˜ë¦¬ (êµ¬í˜„ì²´)
â”‚       â””â”€â”€ presentation/    # UI (Flutter)
```

### Domain ê³„ì¸µ

**ì—­í• **: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ì—”í‹°í‹°, ìœ ìŠ¤ì¼€ì´ìŠ¤ ì •ì˜

**íŠ¹ì§•**:

- ìˆœìˆ˜ Dart ì½”ë“œ (Flutter ì˜ì¡´ì„± ì—†ìŒ)
- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ì¡´ì„± ìµœì†Œí™”
- ì¸í„°í˜ì´ìŠ¤ë§Œ ì •ì˜ (êµ¬í˜„ì€ Data ê³„ì¸µ)

**êµ¬ì„±**:

```text
domain/
â”œâ”€â”€ entities/        # ë¹„ì¦ˆë‹ˆìŠ¤ ì—”í‹°í‹°
â”œâ”€â”€ failures/        # ì—ëŸ¬ íƒ€ì… (sealed class)
â”œâ”€â”€ repositories/    # Repository ì¸í„°í˜ì´ìŠ¤
â””â”€â”€ usecases/        # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìº¡ìŠí™”
```

### Data ê³„ì¸µ

**ì—­í• **: Domainì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬ ì‹¤ì œ ë°ì´í„° ì²˜ë¦¬

**íŠ¹ì§•**:

- Domainì˜ Repository ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
- DataSource ì¶”ìƒí™” (ì›ê²©/ë¡œì»¬)
- Model í´ë˜ìŠ¤ (JSON ì§ë ¬í™”)

**êµ¬ì„±**:

```text
data/
â”œâ”€â”€ datasources/     # DataSource ì¸í„°í˜ì´ìŠ¤
â”œâ”€â”€ models/          # Model í´ë˜ìŠ¤ (Freezed)
â””â”€â”€ repositories/    # Repository êµ¬í˜„ì²´
```

### Presentation ê³„ì¸µ

**ì—­í• **: UI ë° ìƒíƒœ ê´€ë¦¬

**íŠ¹ì§•**:

- Flutter ìœ„ì ¯
- Riverpod Provider
- Domainì˜ UseCase ì‚¬ìš©

**êµ¬ì„±** (ì˜ˆì •):

```text
presentation/
â”œâ”€â”€ providers/       # Riverpod Providers
â”œâ”€â”€ screens/         # í™”ë©´
â””â”€â”€ widgets/         # ì¬ì‚¬ìš© ìœ„ì ¯
```

## ğŸ”„ ë°ì´í„° íë¦„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Presentation                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Screen  â”‚â”€â”€â”€â–¶â”‚ Provider â”‚â”€â”€â”€â–¶â”‚ StateNotifier  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ UseCase í˜¸ì¶œ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Domain                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ UseCase  â”‚â”€â”€â”€â–¶â”‚ Repository â”‚â—€â”€â”€â”€â”‚ Failure/Entity â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚(Interface) â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ êµ¬í˜„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Data                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Repository     â”‚â”€â”€â”€â–¶â”‚ DataSource â”‚â”€â”€â”€â–¶â”‚  Model   â”‚ â”‚
â”‚  â”‚(Implementation)â”‚    â”‚(Interface) â”‚    â”‚(Freezed) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ êµ¬í˜„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Integration                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Firebase/Supabase  â”‚â”€â”€â”€â–¶â”‚  SDK í˜¸ì¶œ            â”‚    â”‚
â”‚  â”‚ DataSource Impl    â”‚    â”‚  (Auth, Firestore ë“±)â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”Œ Integration íŒ¨í‚¤ì§€

**ì—­í• **: ì„œë“œíŒŒí‹° SDK ë˜í•‘ ë° DataSource êµ¬í˜„

**íŠ¹ì§•**:

- Feature íŒ¨í‚¤ì§€ì˜ DataSource ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
- SDKë³„ë¡œ ë…ë¦½ì ì¸ íŒ¨í‚¤ì§€
- êµì²´ ê°€ëŠ¥í•œ êµ¬ì¡° (ì˜ì¡´ì„± ì—­ì „)

**ì˜ˆì‹œ**:

```text
packages/integrations/firebase/
â””â”€â”€ src/
    â””â”€â”€ auth/
        â””â”€â”€ firebase_auth_datasource.dart  # AuthDataSource êµ¬í˜„

packages/integrations/supabase/
â””â”€â”€ src/
    â””â”€â”€ auth/
        â””â”€â”€ supabase_auth_datasource.dart  # AuthDataSource êµ¬í˜„
```

**ì•±ì—ì„œ ì„ íƒ**:

```dart
// Firebase ì‚¬ìš© ì‹œ
final dataSource = FirebaseAuthDataSource();

// Supabase ì‚¬ìš© ì‹œ
final dataSource = SupabaseAuthDataSource();

// Repositoryì— ì£¼ì…
final repository = AuthRepositoryImpl(
  remoteDataSource: dataSource,
  localDataSource: localDataSource,
);
```

## ğŸ¨ ì£¼ìš” ê¸°ìˆ  ìŠ¤íƒ

### ìƒíƒœ ê´€ë¦¬

- **Riverpod**: íƒ€ì… ì•ˆì „í•œ ì˜ì¡´ì„± ì£¼ì… ë° ìƒíƒœ ê´€ë¦¬
- **riverpod_annotation**: ì½”ë“œ ìƒì„±ìœ¼ë¡œ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ê°ì†Œ

### ì—ëŸ¬ í•¸ë“¤ë§

- **fpdart**: Either íƒ€ì…ìœ¼ë¡œ íƒ€ì… ì•ˆì „í•œ ì—ëŸ¬ í•¸ë“¤ë§
- **sealed class**: íŒ¨í„´ ë§¤ì¹­ìœ¼ë¡œ ëª¨ë“  ì¼€ì´ìŠ¤ ì²˜ë¦¬ ê°•ì œ

### ëª¨ë¸ í´ë˜ìŠ¤

- **Freezed**: ë¶ˆë³€ ê°ì²´, copyWith, JSON ì§ë ¬í™” ìë™ ìƒì„±
- **json_serializable**: JSON ì§ë ¬í™”/ì—­ì§ë ¬í™” ì½”ë“œ ìƒì„±

### ë¡œì»¬ ì €ì¥ì†Œ

- **SharedPreferences**: ì¼ë°˜ ë°ì´í„° ì €ì¥
- **FlutterSecureStorage**: ë¯¼ê°í•œ ë°ì´í„° ì €ì¥ (í† í° ë“±)

## ğŸ“¦ íŒ¨í‚¤ì§€ ë¶„ë¥˜

| ë¶„ë¥˜ | ìš©ë„ | í•„ìˆ˜ ì—¬ë¶€ | ìƒíƒœ |
| :----: | :----: | :---------: | :----: |
| `core/storage` | ë¡œì»¬ ì €ì¥ì†Œ ì¶”ìƒí™” | í•„ìˆ˜ | âœ… ì™„ë£Œ |
| `core/theme` | í…Œë§ˆ, ìƒ‰ìƒ, íƒ€ì´í¬ê·¸ë˜í”¼ | í•„ìˆ˜ | ë¯¸êµ¬í˜„ |
| `core/ui_kit` | ê³µìš© ìœ„ì ¯ | í•„ìˆ˜ | ë¯¸êµ¬í˜„ |
| `features/auth` | ì¸ì¦ ê¸°ëŠ¥ | ì„ íƒ | ğŸš§ Domain/Data ì™„ë£Œ |
| `features/payment` | ê²°ì œ ê¸°ëŠ¥ | ì„ íƒ | ë¯¸êµ¬í˜„ |
| `integrations/firebase` | Firebase SDK ë˜í¼ | ì„ íƒ | ë¯¸êµ¬í˜„ |
| `integrations/supabase` | Supabase SDK ë˜í¼ | ì„ íƒ | ë¯¸êµ¬í˜„ |

## ğŸ” ì˜ì¡´ì„± ê·œì¹™

### ê³„ì¸µ ê°„ ì˜ì¡´ì„±

```text
Presentation â”€â”€â”€â–¶ Domain â—€â”€â”€â”€ Data
                    â–²
                    â”‚
              (ì¸í„°í˜ì´ìŠ¤ë§Œ)
```

**ê·œì¹™**:

1. Presentationì€ Domainë§Œ ì˜ì¡´
2. DataëŠ” Domainì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„
3. Domainì€ ì–´ë–¤ ê³„ì¸µì—ë„ ì˜ì¡´í•˜ì§€ ì•ŠìŒ

### íŒ¨í‚¤ì§€ ê°„ ì˜ì¡´ì„±

```text
App
 â”œâ”€â–¶ features/auth â”€â”€â”€â–¶ core/storage
 â”‚        â”‚
 â”‚        â””â”€â”€â–¶ (ì¸í„°í˜ì´ìŠ¤ë§Œ ì •ì˜)
 â”‚
 â””â”€â–¶ integrations/firebase â”€â”€â”€â–¶ features/auth (DataSource êµ¬í˜„)
                          â””â”€â”€â–¶ core/storage
```

**ê·œì¹™**:

1. Feature íŒ¨í‚¤ì§€ëŠ” Core íŒ¨í‚¤ì§€ì—ë§Œ ì˜ì¡´
2. Integration íŒ¨í‚¤ì§€ëŠ” Featureì˜ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
3. Appì€ í•„ìš”í•œ íŒ¨í‚¤ì§€ë§Œ ì„ íƒì ìœ¼ë¡œ ì˜ì¡´

## ğŸš€ ì¥ì 

### 1. í…ŒìŠ¤íŠ¸ ìš©ì´ì„±

- ê° ê³„ì¸µì„ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸
- Mock ê°ì²´ ì£¼ì… ê°€ëŠ¥

### 2. ë°±ì—”ë“œ êµì²´ ìš©ì´ì„±

- DataSourceë§Œ êµì²´í•˜ë©´ ë¨
- Firebase â†” Supabase ì „í™˜ ê°„ë‹¨

### 3. ì ì§„ì  êµ¬í˜„

- Domainë¶€í„° êµ¬í˜„í•˜ê³  ë‚˜ì¤‘ì— êµ¬ì²´í™”
- ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ ê°œë°œ

### 4. ì¬ì‚¬ìš©ì„±

- Feature íŒ¨í‚¤ì§€ë¥¼ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œ ì¬ì‚¬ìš©
- Core íŒ¨í‚¤ì§€ëŠ” ëª¨ë“  ì•±ì—ì„œ ê³µí†µ ì‚¬ìš©

### 5. í™•ì¥ì„±

- ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œ ì˜í–¥ ìµœì†Œí™”
- íŒ¨í‚¤ì§€ ë‹¨ìœ„ë¡œ ë…ë¦½ì  í™•ì¥

## ğŸ“š ì°¸ê³  ìë£Œ

- [Clean Architecture (Robert C. Martin)](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)
- [Feature-First Architecture](https://codewithandrea.com/articles/flutter-project-structure/)
- [Riverpod ê³µì‹ ë¬¸ì„œ](https://riverpod.dev/)
- [Freezed ê³µì‹ ë¬¸ì„œ](https://pub.dev/packages/freezed)
